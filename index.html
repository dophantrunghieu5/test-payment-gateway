<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Test Payment Gateway</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
</head>
<body>
    <div id="text">
        Page 1 is navigating to Page 2 in <span id="counting">5</span>s ...
    </div>

    <!-- <form id="form-submit" action="https://integration-5ojmyuq-bn7eqktw2m3ye.ap-3.magentosite.cloud/unified_payment/payment/index/" method="post">
        <input type="hidden" id="testInput" />
    </form> -->

    <form id="form-submit" action="https://payment-redirect-ddd5582041d1.herokuapp.com/api/v1/payment/index/" method="post">
        <input type="hidden" id="testInput" />
    </form>

    <script>        
        const MAX_COUNTING = 5;
        let count = MAX_COUNTING;
        setInterval(() => {
            count--;
            document.querySelector('#counting').innerHTML = count;

            if(count === 0) {
                document.querySelector('#testInput').setAttribute('name', 'data');
                document.querySelector('#testInput').setAttribute('value', JSON.stringify(JSON.parse("{\"order\":{\"ccy\":\"HKD\",\"edwData\":{\"paycode\":\"0002\",\"cardType\":\"CREDIT+CARD\",\"type\":\"mpgs\",\"subCardType\":\"VISA\",\"extraInfo\":{\"transaction.authorizationCode\":\"039324\",\"transaction.receipt\":\"331613039324\",\"sourceOfFunds.provided.card.number\":\"450875xxxxxx1019\"}},\"payAmount\":108,\"paymentMethodId\":\"20002\",\"promo\":{},\"siteOrderRefNo\":\"97080000000172111207\",\"status\":\"SUCCESS\"},\"signature\":\"9480E7378B0A90426AF4BF0A1BF89AF9E43B7C4F30EE8D3D0B332D940531DE80\"}")));
                document.querySelector('#form-submit').submit();
                //window.location.href = `https://glittery-trifle-b24c1a.netlify.app?order_id=0000000097`;
            }
        }, 1000);
    </script>
</body>
</html>